###########################################
#     	 Fallen Technologies Events
#		  		  By Kolyn
###########################################

namespace = fallen_technologies

# Becoming an Ascended Empire
country_event = {
	id = fallen_technologies.1
	title = fallen_technologies.1.name
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	location = from
	
	
	desc = {
		trigger = { 
			NOR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_fanatic_pacifist
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_fanatic_egalitarian
				has_authority = "auth_hive_mind"
				has_authority = "auth_machine_intelligence"
			}
		}
		text = "fallen_technologies.1.desc"
	}
	desc = {
		trigger = { has_ethic = ethic_fanatic_spiritualist }
		text = "fallen_technologies.1.desc.01"
	}
	desc = { 
		trigger = { has_ethic = ethic_fanatic_materialist }
		text = "fallen_technologies.1.desc.02"
	}
	desc = { 
		trigger = { has_ethic = ethic_fanatic_xenophile }
		text = "fallen_technologies.1.desc.03"
	}
	desc = {
		trigger = { has_ethic = ethic_fanatic_xenophobe }
		text = "fallen_technologies.1.desc.04"
	}
	desc = {
		trigger = { has_ethic = ethic_fanatic_militarist }
		text = "fallen_technologies.1.desc.05"
	}
	desc = { 
		trigger = { has_ethic = ethic_fanatic_pacifist }
		text = "fallen_technologies.1.desc.06"
	}
	desc = { 
		trigger = { has_ethic = ethic_fanatic_authoritarian }
		text = "fallen_technologies.1.desc.07"
	}
	desc = { 
		trigger = { has_ethic = ethic_fanatic_egalitarian }
		text = "fallen_technologies.1.desc.08"
	}
	desc = { 
		trigger = { has_authority = "auth_hive_mind" }
		text = "fallen_technologies.1.desc.09"
	}
	desc = { 
		trigger = { has_authority = "auth_machine_intelligence" }
		text = "fallen_technologies.1.desc.10"
	}
	
	is_triggered_only = yes
	
	immediate = {
		set_timed_country_flag = { flag = new_ascended_empire days = 3600 }
		every_country = {
			limit = { 
				OR = {
					is_country_type = default
					is_country_type = ascended_empire
					is_country_type = awakened_fallen_empire
				}
			}
			set_timed_country_flag = { flag = ai_no_wars days = 3600 }
		}
	}

	option = {
		name = fallen_technologies.1.a	
		trigger = { 
			is_ai = no
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
			}
		}
		
		set_country_type = ascended_empire
		set_country_flag = ascended_empire
		
		begin_event_chain = {
			event_chain = "fallen_technologies_chain"
			target = ROOT
		}
		
		hidden_effect = {
			enable_special_project = {
				name = "fallen_technologies_1"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_2"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_3"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_4"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_5"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_6"
				location = root.capital_scope
				owner = root
			}
			add_resource = { minerals = 100000 }
			add_resource = { energy = 100000 }
			add_resource = { food = 100000 }
			add_resource = { consumer_goods = 50000 }
			add_resource = { alloys = 50000 }			
			add_resource = { influence = 1000 }
			add_resource = { unity = 100000 }
			add_resource = { volatile_motes = 5000 }
			add_resource = { exotic_gases = 5000 }
			add_resource = { rare_crystals = 5000 }
			add_resource = { sr_dark_matter = 1000 }
			add_resource = { sr_zro = 1000 }
			add_resource = { sr_living_metal = 1000 }
			add_resource = { nanites = 100 }
			add_resource = { minor_artifacts = 100 }
			every_country = {					# Notify Players
				limit = {
					NOT = { is_same_value = root }
					is_ai = no			
				}
				country_event = { id = fallen_technologies.2 }
			}
		}
	}
	
	option = {
		name = fallen_technologies.1.b	
		trigger = { 
			is_ai = yes
		}	
		
		set_country_type = ascended_empire
		set_country_flag = ascended_empire
		
		begin_event_chain = {
			event_chain = "fallen_technologies_chain"
			target = ROOT
		}
		
			
		hidden_effect = {
			enable_special_project = {
				name = "fallen_technologies_1"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_2"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_3"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_4"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_5"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_6"
				location = root.capital_scope
				owner = root
			}
			if = {
				limit = {
					NOR = {
						has_valid_civic = civic_inwards_perfection
						has_valid_civic = civic_fanatic_purifiers
						has_valid_civic = civic_barbaric_despoilers
						has_valid_civic = civic_hive_devouring_swarm
						has_valid_civic = civic_machine_servitor
						has_valid_civic = civic_machine_terminator
						has_valid_civic = civic_machine_assimilator
						has_valid_civic = civic_criminal_heritage
					}
				}
				change_government = {
					civics = random
				}
			}
			add_resource = { minerals = 100000 }
			add_resource = { energy = 100000 }
			add_resource = { food = 100000 }
			add_resource = { consumer_goods = 50000 }
			add_resource = { alloys = 50000 }			
			add_resource = { influence = 1000 }
			add_resource = { unity = 100000 }
			add_resource = { volatile_motes = 5000 }
			add_resource = { exotic_gases = 5000 }
			add_resource = { rare_crystals = 5000 }
			add_resource = { sr_dark_matter = 1000 }
			add_resource = { sr_zro = 1000 }
			add_resource = { sr_living_metal = 1000 }
			add_resource = { nanites = 100 }
			add_resource = { minor_artifacts = 100 }
			every_country = {					# Notify Players
				limit = {
					NOT = { is_same_value = root }
					is_ai = no			
				}
				country_event = { id = fallen_technologies.2 }
			}
		}
	}
	
	option = {
		name = fallen_technologies.1.c	
		trigger = { 
			is_ai = no
			has_valid_civic = civic_fanatic_purifiers
		}
		
		set_country_type = ascended_empire
		set_country_flag = ascended_empire
		
		begin_event_chain = {
			event_chain = "fallen_technologies_chain"
			target = ROOT
		}
		
		hidden_effect = {
			enable_special_project = {
				name = "fallen_technologies_1"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_2"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_3"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_4"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_5"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_6"
				location = root.capital_scope
				owner = root
			}
			add_resource = { minerals = 100000 }
			add_resource = { energy = 100000 }
			add_resource = { food = 100000 }
			add_resource = { consumer_goods = 50000 }
			add_resource = { alloys = 50000 }			
			add_resource = { influence = 1000 }
			add_resource = { unity = 100000 }
			add_resource = { volatile_motes = 5000 }
			add_resource = { exotic_gases = 5000 }
			add_resource = { rare_crystals = 5000 }
			add_resource = { sr_dark_matter = 1000 }
			add_resource = { sr_zro = 1000 }
			add_resource = { sr_living_metal = 1000 }
			add_resource = { nanites = 100 }
			add_resource = { minor_artifacts = 100 }
			every_country = {					# Notify Players
				limit = {
					NOT = { is_same_value = root }
					is_ai = no			
				}
				country_event = { id = fallen_technologies.2 }
			}
		}
	}
	
	option = {
		name = fallen_technologies.1.d	
		trigger = { 
			is_ai = no
			has_valid_civic = civic_hive_devouring_swarm
		}
		
		set_country_type = ascended_empire
		set_country_flag = ascended_empire
		
		begin_event_chain = {
			event_chain = "fallen_technologies_chain"
			target = ROOT
		}
		
		hidden_effect = {
			enable_special_project = {
				name = "fallen_technologies_1"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_2"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_3"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_4"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_5"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_6"
				location = root.capital_scope
				owner = root
			}
			add_resource = { minerals = 100000 }
			add_resource = { energy = 100000 }
			add_resource = { food = 100000 }
			add_resource = { consumer_goods = 50000 }
			add_resource = { alloys = 50000 }			
			add_resource = { influence = 1000 }
			add_resource = { unity = 100000 }
			add_resource = { volatile_motes = 5000 }
			add_resource = { exotic_gases = 5000 }
			add_resource = { rare_crystals = 5000 }
			add_resource = { sr_dark_matter = 1000 }
			add_resource = { sr_zro = 1000 }
			add_resource = { sr_living_metal = 1000 }
			add_resource = { nanites = 100 }
			add_resource = { minor_artifacts = 100 }
			every_country = {					# Notify Players
				limit = {
					NOT = { is_same_value = root }
					is_ai = no			
				}
				country_event = { id = fallen_technologies.2 }
			}
		}
	}
	
	option = {
		name = fallen_technologies.1.e	
		trigger = { 
			is_ai = no
			has_valid_civic = civic_machine_terminator
		}
		
		set_country_type = ascended_empire
		set_country_flag = ascended_empire
		
		begin_event_chain = {
			event_chain = "fallen_technologies_chain"
			target = ROOT
		}
		
		hidden_effect = {
			enable_special_project = {
				name = "fallen_technologies_1"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_2"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_3"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_4"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_5"
				location = root.capital_scope
				owner = root
			}
			enable_special_project = {
				name = "fallen_technologies_6"
				location = root.capital_scope
				owner = root
			}
			add_resource = { minerals = 100000 }
			add_resource = { energy = 100000 }
			add_resource = { food = 100000 }
			add_resource = { consumer_goods = 50000 }
			add_resource = { alloys = 50000 }			
			add_resource = { influence = 1000 }
			add_resource = { unity = 100000 }
			add_resource = { volatile_motes = 5000 }
			add_resource = { exotic_gases = 5000 }
			add_resource = { rare_crystals = 5000 }
			add_resource = { sr_dark_matter = 1000 }
			add_resource = { sr_zro = 1000 }
			add_resource = { sr_living_metal = 1000 }
			add_resource = { nanites = 100 }
			add_resource = { minor_artifacts = 100 }
			every_country = {					# Notify Players
				limit = {
					NOT = { is_same_value = root }
					is_ai = no			
				}
				country_event = { id = fallen_technologies.2 }
			}
		}
	}
}

# AI Ascends without AP slot
country_event = {
	id = fallen_technologies.100
	title = OK
	desc = OK
	hide_window = yes
	
	trigger = {	
		is_country_type = default
		is_ai = yes
		is_subject = no
		NOT = { has_country_flag = ai_debug_ascend }
		num_owned_planets > 4
		num_ascension_perks > 7
		fleet_power > 100000
		AND = {
			has_technology = tech_dark_matter_power_core
			has_technology = tech_mega_engineering
			has_technology = tech_ascension_theory	
		}
#		OR = {
#			has_ethic = ethic_fanatic_spiritualist
#			has_ethic = ethic_fanatic_materialist
#			has_ethic = ethic_fanatic_xenophile
#			has_ethic = ethic_fanatic_xenophobe
#			has_ethic = ethic_fanatic_militarist
#			has_ethic = ethic_fanatic_pacifist
#			has_ethic = ethic_fanatic_authoritarian
#			has_ethic = ethic_fanatic_egalitarian
#			has_authority = "auth_hive_mind"
#			has_authority = "auth_machine_intelligence"
#			has_authority = "auth_corporate"
#		}
	}		
	
	immediate = {
		country_event = { id = zofe_debug.2 }
	}
}

# Fallen Technologies 1 (FE Buildings) Completed
country_event = {
	id = fallen_technologies.101
	title = fallen_technologies.101.name
	desc = fallen_technologies.101.desc
	picture = GFX_evt_physics_research
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_1_completed
	}
	
	option = {
		name = fallen_technologies.101.a
		give_technology = { tech = tech_fallen_technologies_1 }
	}
}

# Fallen Technologies 2 Completed (Societal Buildings )
country_event = {
	id = fallen_technologies.102
	title = fallen_technologies.102.name
	desc = fallen_technologies.102.desc
	picture = GFX_evt_city_planet
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_2_completed
	}
	
	option = {
		name = fallen_technologies.102.a
		give_technology = { tech = tech_fallen_technologies_2 }
		if = {
			limit = { 
				host_has_dlc = "Megacorp"
				is_regular_empire = yes
				NOT = {
					has_ascension_perk = ap_arcology_project
				}
			}
			add_research_option = tech_arcology_project
		}
		if = {
			limit = { 
				host_has_dlc = "Megacorp"
				is_regular_empire = yes
				has_ascension_perk = ap_arcology_project
			}
			add_resource = { unity = 50000 }
		}
	}

}

# Fallen Technologies 3 (FE Ships) Completed
country_event = {
	id = fallen_technologies.103
	title = fallen_technologies.103.name
	desc = fallen_technologies.103.desc
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_3_completed
	}

	option = {
		name = fallen_technologies.103.a
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}			
		hidden_effect = {
			set_graphical_culture = fallen_spiritualist
			set_city_graphical_culture = fallen_spiritualist
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.b
		trigger = { 
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_materialist
			set_city_graphical_culture = fallen_materialist
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	
	
	option = {
		name = fallen_technologies.103.c
		trigger = { 
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_xenophile
			set_city_graphical_culture = fallen_xenophile
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.da
		trigger = { 
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_xenophobe
			set_city_graphical_culture = fallen_xenophobe
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.db
		exclusive_trigger = { 
			has_valid_civic = civic_fanatic_purifiers
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_xenophobe_02
			set_city_graphical_culture = fallen_xenophobe_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_valid_civic = civic_fanatic_purifiers
			}
		}
	}
	
	
	option = {
		name = fallen_technologies.103.e
		trigger = { 
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_militarist
			set_city_graphical_culture = fallen_militarist
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_militarist
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.fa
		trigger = { 
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_pacifist
			set_city_graphical_culture = fallen_pacifist
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_pacifist
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.fb
		trigger = { 
			has_valid_civic = civic_inwards_perfection
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_spiritualist_02
			set_city_graphical_culture = fallen_spiritualist_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_valid_civic = civic_inwards_perfection
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.g
		trigger = { 
			OR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_authoritarian
			set_city_graphical_culture = fallen_authoritarian
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_authoritarian
			}
		}
	}
	
	
	option = {
		name = fallen_technologies.103.h
		trigger = { 
			OR = {
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
			}	
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_egalitarian_02
			set_city_graphical_culture = fallen_egalitarian_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_ethic = ethic_fanatic_egalitarian
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.ia
		trigger = { 
			has_authority = auth_hive_mind	
			NOT = { has_valid_civic = civic_hive_devouring_swarm }
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_hive_mind
			set_city_graphical_culture = fallen_hive_mind
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_authority = auth_hive_mind	
				NOT = { has_valid_civic = civic_hive_devouring_swarm }
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.ib
		trigger = { 
			has_authority = auth_hive_mind	
			has_valid_civic = civic_hive_devouring_swarm
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_hive_mind_02
			set_city_graphical_culture = fallen_hive_mind_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_authority = auth_hive_mind	
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.ja
		trigger = { 
			has_authority = auth_machine_intelligence
			NOT = {
				has_valid_civic = civic_machine_terminator
			}
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_machine
			set_city_graphical_culture = fallen_machine
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_authority = auth_machine_intelligence	
				NOT = { has_valid_civic = civic_machine_terminator }
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.jb
		trigger = { 
			has_authority = auth_machine_intelligence
			has_valid_civic = civic_machine_terminator
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_machine_02
			set_city_graphical_culture = fallen_machine_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_authority = auth_machine_intelligence	
				has_valid_civic = civic_machine_terminator
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.k
		trigger = { 
			has_authority = auth_corporate
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_machine_02
			set_city_graphical_culture = fallen_machine_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				has_authority = auth_corporate	
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.l
		trigger = {
			NOR = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_fanatic_pacifist
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_fanatic_egalitarian
				has_authority = auth_hive_mind
				has_authority = auth_machine_intelligence
				has_authority = auth_corporate
			}
		}
		add_resource = { influence = 100 }
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			set_graphical_culture = fallen_materialist_02
			set_city_graphical_culture = fallen_materialist_02
		}
		ai_chance = {										# AI chance
			factor = 1000
			modifier = {
				factor = 10
				NOR = {
					has_ethic = ethic_fanatic_spiritualist
					has_ethic = ethic_fanatic_materialist
					has_ethic = ethic_fanatic_xenophile
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_fanatic_authoritarian
					has_ethic = ethic_fanatic_egalitarian
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
					has_authority = auth_corporate
				}	
			}
		}
	}
	
	option = {
		name = fallen_technologies.103.x
		allow = {
			resource_stockpile_compare = { resource = influence value >= 100 }
		}
		add_resource = { influence = -100 }
		
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
		hidden_effect = {
			country_event = { id = zofe_debug.1 }
		}
		ai_chance = {										
			factor = 0			
		}
	}
	
	option = {
		name = fallen_technologies.103.z
		custom_tooltip = "fe_ships_graphical_bugs"
		allow = {
			resource_stockpile_compare = { resource = influence value >= 500 }
		}
		add_resource = { influence = -500 }
		
		give_technology = { tech = tech_fallen_technologies_3 message = no }
		if = {
			limit = { 
				NOT = {
					has_technology = tech_dark_matter_propulsion
				}
			}
			give_technology = { tech = tech_dark_matter_propulsion message = no }
		}	
	
		ai_chance = {										
			factor = 0			
		}
	}
}

# Fallen Technologies 4 (Technological Mastery) Completed
country_event = {
	id = fallen_technologies.104
	title = fallen_technologies.104.name
	desc = fallen_technologies.104.desc
	picture = GFX_evt_engineering_research
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_4_completed
	}
	
	option = {
		name = fallen_technologies.104.a
		give_technology = { tech = tech_fallen_technologies_4 }
	}
}

# Fallen Technologies 5 (Edicts and Ambitions) Completed
country_event = {
	id = fallen_technologies.105
	title = fallen_technologies.105.name
	desc = fallen_technologies.105.desc
	picture = GFX_evt_alien_propaganda
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_5_completed
	}
	
	option = {
		name = fallen_technologies.105.a
		give_technology = { tech = tech_fallen_technologies_5 }
		if = {
			limit = { 
				host_has_dlc = "Apocalypse"
				has_technology = tech_titans
				NOT = {
					has_ascension_perk = ap_colossus
				}
			}
			hidden_effect = {
				country_event = { id = apoc.100 }
			}
			custom_tooltip = enable_colossus_project
			custom_tooltip = describe_colossus_project
		}
		if = {
			limit = { 
				host_has_dlc = "Apocalypse"
				has_technology = tech_titans
				has_ascension_perk = ap_colossus
			}
			give_technology = { tech = tech_colossus_hull_1 }
		}
	}
}

# Fallen Technologies 6 (Engineering Perfection) Completed
country_event = {
	id = fallen_technologies.106
	title = fallen_technologies.106.name
	desc = fallen_technologies.106.desc
	picture = GFX_evt_ringworld
	show_sound = event_alien_signal
	location = from
	
	is_triggered_only = yes
	
	immediate = {
		set_country_flag = fallen_technologies_6_completed
	}
	
	option = {
		name = fallen_technologies.106.a
		give_technology = { tech = tech_fallen_technologies_6 }
		if = {
			limit = { 
				host_has_dlc = "Utopia"
				NOT = {
					has_technology = tech_ring_world
				}
			}
			add_research_option = tech_ring_world
		}
		if = {
			limit = { 
				host_has_dlc = "Utopia"
				NOT = {
					has_technology = tech_dyson_sphere
				}
			}
			add_research_option = tech_dyson_sphere
		}
		if = {
			limit = { 
				host_has_dlc = "Megacorp"
				NOT = {
					has_technology = tech_matter_decompressor
				}
			}
			add_research_option = tech_matter_decompressor
		}
		if = {
			limit = { 
				host_has_dlc = "Utopia"
				OR = {
					has_technology = tech_ring_world
					has_technology = tech_dyson_sphere
					has_technology = tech_matter_decompressor
				}
			}
			add_resource = { engineering_research = 100000 }
		}
	}
}



# Ascension Complete
country_event = {
	id = fallen_technologies.1000
	title = fallen_technologies.1000.name
	
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	location = from
	
	trigger = {
		NOT = { has_country_flag = ascension_complete }
		AND = {
			has_country_flag = fallen_technologies_1_completed
			has_country_flag = fallen_technologies_2_completed
			has_country_flag = fallen_technologies_3_completed
			has_country_flag = fallen_technologies_4_completed
			has_country_flag = fallen_technologies_5_completed
			has_country_flag = fallen_technologies_6_completed
		}
	}
	
	desc = {
		trigger = { 
			NOR = {
				has_valid_civic = civic_galactic_superpower
				has_valid_civic = civic_beacon_of_prosperity
				has_valid_civic = civic_industrial_juggernaut
				has_valid_civic = civic_world_architect
				has_valid_civic = civic_technological_mastery
			}
		}
		text = "fallen_technologies.1000.desc"
	}
	
	desc = {
		trigger = { has_valid_civic = civic_galactic_superpower }
		text = "fallen_technologies.1000.desc.02"
	}
	
	desc = {
		trigger = { has_valid_civic = civic_beacon_of_prosperity }
		text = "fallen_technologies.1000.desc.03"
	}
	
	desc = {
		trigger = { has_valid_civic = civic_industrial_juggernaut }
		text = "fallen_technologies.1000.desc.04"
	}
	
	desc = {
		trigger = { has_valid_civic = civic_world_architect }
		text = "fallen_technologies.1000.desc.05"
	}
	
	desc = {
		trigger = { has_valid_civic = civic_technological_mastery }
		text = "fallen_technologies.1000.desc.06"
	}
	
	option = {
		name = fallen_technologies.1000.a
		trigger = {
			has_ethic = ethic_fanatic_spiritualist
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_spiritualist" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.b
		trigger = {
			has_ethic = ethic_fanatic_materialist
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_materialist" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.c
		trigger = {
			has_ethic = ethic_fanatic_xenophile
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_xenophile" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.d
		trigger = {
			has_ethic = ethic_fanatic_xenophobe
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { 
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				has_ethic = "ethic_spiritualist"
			}
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { 
				NOT = { has_valid_civic = civic_fanatic_purifiers }
				has_ethic = "ethic_militarist"
			}
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_xenophobe" }
		end_event_chain = "fallen_technologies_chain"
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.e
		trigger = {
			has_ethic = ethic_fanatic_militarist
		}
		add_resource = { unity = 50000 }
		
		
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_militarist" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}		
	}
	
	option = {
		name = fallen_technologies.1000.f
		trigger = {
			has_ethic = ethic_fanatic_pacifist
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_authoritarian" }
			country_remove_ethic = "ethic_authoritarian"
		}
		if = {
			limit = { has_ethic = "ethic_egalitarian" }
			country_remove_ethic = "ethic_egalitarian"
		}
		every_owned_pop = { pop_change_ethic = "ethic_pacifist" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}

		ai_chance = {										# AI chance
			factor = 1000
		}		
		
	}
	
	option = {
		name = fallen_technologies.1000.g
		trigger = {
			has_ethic = ethic_fanatic_authoritarian
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		every_owned_pop = { pop_change_ethic = "ethic_authoritarian" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.h
		trigger = {
			has_ethic = ethic_fanatic_egalitarian
		}
		add_resource = { unity = 50000 }
		
		if = {
			limit = { has_ethic = "ethic_spiritualist" }
			country_remove_ethic = "ethic_spiritualist"
		}
		if = {
			limit = { has_ethic = "ethic_materialist" }
			country_remove_ethic = "ethic_materialist"
		}
		if = {
			limit = { has_ethic = "ethic_xenophile" }
			country_remove_ethic = "ethic_xenophile"
		}
		if = {
			limit = { has_ethic = "ethic_xenophobe" }
			country_remove_ethic = "ethic_xenophobe"
		}
		if = {
			limit = { has_ethic = "ethic_militarist" }
			country_remove_ethic = "ethic_militarist"
		}
		if = {
			limit = { has_ethic = "ethic_pacifist" }
			country_remove_ethic = "ethic_pacifist"
		}
		every_owned_pop = { pop_change_ethic = "ethic_egalitarian" }
		end_event_chain = "fallen_technologies_chain"
		
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.i
		trigger = {
			has_authority = auth_hive_mind
		}
		add_resource = { unity = 50000 }
		end_event_chain = "fallen_technologies_chain"
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.j
		trigger = {
			has_authority = auth_machine_intelligence
		}
		add_resource = { unity = 50000 }
		end_event_chain = "fallen_technologies_chain"
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}
	
	option = {
		name = fallen_technologies.1000.k

		add_resource = { unity = 50000 }
		end_event_chain = "fallen_technologies_chain"
		
		hidden_effect = {
			set_country_flag = ascension_complete
		}
		
		ai_chance = {										# AI chance
			factor = 10
		}
	}
}

# New Ascended Empire Player Notification
country_event = {
	id = fallen_technologies.2
	title = fallen_technologies.2.name
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	location = from
	
	desc = {
		trigger = {
			FROM = {
				NOR = {
					has_ethic = ethic_fanatic_spiritualist 
					has_ethic = ethic_fanatic_materialist
					has_ethic = ethic_fanatic_xenophile
					has_ethic = ethic_fanatic_xenophobe 
					has_ethic = ethic_fanatic_militarist 
					has_ethic = ethic_fanatic_pacifist 
					has_ethic = ethic_fanatic_authoritarian
					has_ethic = ethic_fanatic_egalitarian 
					has_authority = "auth_hive_mind"
					has_authority = "auth_machine_intelligence"
				}
			} 
		}
		text = "fallen_technologies.2.desc"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_spiritualist 
			}
		}
		text = "fallen_technologies.2.desc.a"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_materialist 
			} 
		}
		text = "fallen_technologies.2.desc.b"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_xenophile
			} 
		}
		text = "fallen_technologies.2.desc.c"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_xenophobe 
			} 
		}
		text = "fallen_technologies.2.desc.da"
	}
	desc = {
		exclusive_trigger = {
			FROM = {
				has_valid_civic = civic_fanatic_purifiers
			}
		}
		text = "fallen_technologies.2.desc.db"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_militarist 
			} 
		}
		text = "fallen_technologies.2.desc.e"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_pacifist 
			} 
		}
		text = "fallen_technologies.2.desc.fa"
	}
	desc = {
		trigger = {
			FROM = {
				has_valid_civic = civic_inwards_perfection
			}
		}
		text = "fallen_technologies.2.desc.fb"
	}	
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_authoritarian 
			} 
		}
		text = "fallen_technologies.2.desc.g"
	}
	desc = {
		trigger = {
			FROM = {
				has_ethic = ethic_fanatic_egalitarian 
			} 
		}
		text = "fallen_technologies.2.desc.h"
	}
	desc = {
		trigger = {
			FROM = {
				has_valid_civic = civic_barbaric_despoilers
			}
		}
		text = "fallen_technologies.2.desc.i"
	}	
	desc = {
		trigger = {
			FROM = {
				has_authority = auth_hive_mind
			}
		}
		text = "fallen_technologies.2.desc.ja"
	}	
	desc = {
		exclusive_trigger = {
			FROM = {
				has_valid_civic = civic_hive_devouring_swarm
			}
		}
		text = "fallen_technologies.2.desc.jb"
	}
	desc = {
		trigger = {
			FROM = {
				has_authority = auth_machine_intelligence
			}
		}
		text = "fallen_technologies.2.desc.ka"
	}
	desc = {
		exclusive_trigger = {
			FROM = {
				has_valid_civic = civic_machine_servitor
			}
		}
		text = "fallen_technologies.2.desc.kb"
	}	
	desc = {
		exclusive_trigger = {
			FROM = {
				has_valid_civic = civic_machine_assimilator
			}
		}
		text = "fallen_technologies.2.desc.kc"
	}
	desc = {
		exclusive_trigger = {
			FROM = {
				has_valid_civic = civic_machine_terminator
			}
		}
		text = "fallen_technologies.2.desc.kd"
	}	
	
	is_triggered_only = yes

	option = {
		name = fallen_technologies.2.a			
	}
}

# Ascended Empire Spaceport Reconstruction Event
country_event = {
	id = fallen_technologies.3
	title = fallen_technologies.3.name
	desc = fallen_technologies.3.desc
	picture = GFX_evt_fallen_empire
	
	trigger = {		
		is_country_type = ascended_empire
		has_technology = tech_fallen_technologies_3
		OR = {
			is_ai = no
			AND = {
				is_ai = yes
				is_at_war = no
			}
		}
		OR = {
			graphical_culture = fallen_spiritualist
			graphical_culture = fallen_spiritualist_02
			graphical_culture = fallen_materialist
			graphical_culture = fallen_materialist_02
			graphical_culture = fallen_xenophile
			graphical_culture = fallen_xenophobe
			graphical_culture = fallen_xenophobe_02
			graphical_culture = fallen_militarist
			graphical_culture = fallen_militarist_02
			graphical_culture = fallen_pacifist
			graphical_culture = fallen_authoritarian
			graphical_culture = fallen_egalitarian_02
			graphical_culture = fallen_hive_mind
			graphical_culture = fallen_hive_mind_02
			graphical_culture = fallen_machine
			graphical_culture = fallen_machine_02
			graphical_culture = original_empire_01
		}
		NOT = { has_country_flag = spaceport_redesigned }
	}		
	
	mean_time_to_happen = {
		years = 10
	}

	option = {
		name = fallen_technologies.3.a
		trigger = { is_ai = no }
		set_country_flag = spaceport_redesigned
		capital_scope = {
			enable_special_project = {
				name = "SPACEPORT_RECONSTRUCTION_PROJECT"
				location = this
				owner = ROOT
			}
		}
		
		ai_chance = {										# AI chance
			factor = 0
		}
	}
	
	option = {
		name = fallen_technologies.3.a
		trigger = { is_ai = yes }
		set_country_flag = spaceport_redesigned
		add_resource = {
			alloys = 50000
			energy = 50000
			minerals = 50000
		}
		capital_scope = {
			enable_special_project = {
				name = "SPACEPORT_RECONSTRUCTION_PROJECT"
				location = this
				owner = ROOT
			}
		}
		
		ai_chance = {										# AI chance
			factor = 1000
		}
	}

	option = {
		name = fallen_technologies.3.b
		hidden_effect = {
			set_country_flag = spaceport_redesigned
		}
	}
}

# Ascended Empire Subject Conversion
country_event = {
	id = fallen_technologies.4
	title = OK
	desc = OK
	hide_window = yes
	
	trigger = {		
		is_country_type = default
		is_at_war = no
		NOT = { has_country_flag = subject_conversion }
		OR = {
			is_subject_type = vassal
			is_subject_type = tributary
			is_subject_type = protectorate
		}
		any_country = {
			AND = {
				is_country_type = ascended_empire
				is_overlord_to = root
				NOT = { has_valid_civic = civic_inwards_perfection }
				OR = {
					has_valid_civic = civic_spiritualist_fervor
					has_valid_civic = civic_materialist_fervor
					has_valid_civic = civic_xenophile_fervor
					has_valid_civic = civic_xenophobe_fervor
					has_valid_civic = civic_militarist_fervor
					has_valid_civic = civic_pacifist_fervor
					has_valid_civic = civic_authoritarian_fervor
					has_valid_civic = civic_egalitarian_fervor
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}		
	}
	
	immediate = {

		save_event_target_as = NoobEmpire
		
		set_country_flag = subject_conversion
	
		random_country = {
			limit = { 
				is_country_type = ascended_empire
				is_overlord_to = root
			}
			save_event_target_as = AscendedEmpireOverlord
			event_target:AscendedEmpireOverlord = { country_event = { id = fallen_technologies.40 } }
		}
	}
}

# Ascended Empire Subject Conversion Notification
country_event = {
	id = fallen_technologies.40
	title = fallen_technologies.40.name
	
	is_triggered_only = yes
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:NoobEmpire
		planet_background = event_target:NoobEmpire
		graphical_culture = event_target:NoobEmpire
		city_level = event_target:NoobEmpire
		room = event_target:NoobEmpire
	}
	
	desc = {
		text = fallen_technologies.40.desc
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_spiritualist_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.b
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_materialist_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.c
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_xenophile_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.d
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_xenophobe_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.e
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_militarist_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.f
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_pacifist_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.g
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_authoritarian_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.h
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_egalitarian_fervor }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.i
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.j
		trigger = {
			event_target:AscendedEmpireOverlord = { has_authority = auth_hive_mind }
		}
	}
	desc = {
		text = fallen_technologies.40.desc.k
		trigger = {
			event_target:AscendedEmpireOverlord = { has_authority = auth_machine_intelligence }
		}
	}
	
	
	option = {
		name = fallen_technologies.40.a
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_spiritualist_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = dominion
			}
			remove_country_flag = subject_conversion
		}
	}
	
	option = {
		name = fallen_technologies.40.b
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_materialist_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = satellite
			}
			remove_country_flag = subject_conversion
		}	
	}
	
	option = {
		name = fallen_technologies.40.c
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_xenophile_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = signatory
			}
			remove_country_flag = subject_conversion
		}			
	}
		
	option = {
		name = fallen_technologies.40.d
		trigger = {
			NOT = {
				event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
			}
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_xenophobe_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = thrall
			}
			remove_country_flag = subject_conversion
		}		
	}
	
	option = {
		name = fallen_technologies.40.e
		trigger = {
			NOT = {
				event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
			}
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_militarist_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_clan_member
			}
			remove_country_flag = subject_conversion
		}			
	}
	
	option = {
		name = fallen_technologies.40.f
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_pacifist_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_demilitarized_state
			}
			remove_country_flag = subject_conversion
		}	
	}
	
	option = {
		name = fallen_technologies.40.g
		trigger = {
			NOT = {
				event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
			}
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_authoritarian_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_puppet_state
			}
			remove_country_flag = subject_conversion
		}	
	}
	
	option = {
		name = fallen_technologies.40.h
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_egalitarian_fervor }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_union_state
			}
			remove_country_flag = subject_conversion
		}		
	}
	
	option = {
		name = fallen_technologies.40.i
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_satrapy
			}
			remove_country_flag = subject_conversion
		}		
	}
	
	option = {
		name = fallen_technologies.40.j
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_all_seeing_eye }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_symbiote
			}
			remove_country_flag = subject_conversion
		}		
	}
	
	option = {
		name = fallen_technologies.40.k
		trigger = {
			event_target:AscendedEmpireOverlord = { has_authority = auth_machine_intelligence }
		}
		event_target:NoobEmpire = { 
			set_subject_of = {
				who = event_target:AscendedEmpireOverlord
				subject_type = fe_auxiliary
			}
			remove_country_flag = subject_conversion
		}		
	}
}

# Ascended Empire Subject Effects Trigger
country_event = {
	id = fallen_technologies.5
	title = OK
	desc = OK
	hide_window = yes
	
	trigger = {		
		is_country_type = default
		is_at_war = no
		NOT = { has_country_flag = subject_modifier_applied }
		OR = {
			is_subject_type = satellite
			is_subject_type = fe_clan_member
			is_subject_type = fe_demilitarized_state
			is_subject_type = fe_puppet_state
			is_subject_type = fe_union_state
			is_subject_type = fe_satrapy
			is_subject_type = fe_auxiliary
		}
		any_country = {
			is_country_type = ascended_empire
			is_overlord_to = root	
		}
	}		

	
	immediate = {
		save_event_target_as = NoobEmpire
	
		random_country = {
			limit = { 
				is_country_type = ascended_empire
				is_overlord_to = root
			}
			save_event_target_as = AscendedEmpireOverlord
			event_target:AscendedEmpireOverlord = { 
				if = {
					limit = {
						OR = { 
							has_valid_civic = civic_fanatical_roboteers
							has_valid_civic = civic_inspiring_warlords
							has_valid_civic = civic_pacifist_fervor
							has_valid_civic = civic_authoritarian_fervor
							has_valid_civic = civic_egalitarian_fervor
							has_valid_civic = civic_barbaric_despoilers
							has_authority = auth_machine_intelligence
						}	
					}
				country_event = { id = fallen_technologies.6 } 
				}
			}
		}
	}
}

# Ascended Empire Subject Effects
country_event = {
	id = fallen_technologies.6

	title = fallen_technologies.6.name
	picture = GFX_evt_fallen_empire
	
	is_triggered_only = yes
	
	desc = {
		text = fallen_technologies.6.desc
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_fanatical_roboteers }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.ed
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_inspiring_warlords }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.f
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_pacifist_fervor }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.g
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_authoritarian_fervor }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.h
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_egalitarian_fervor }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.i
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
		}
	}
	desc = {
		text = fallen_technologies.6.desc.j
		trigger = {
			event_target:AscendedEmpireOverlord = { has_authority = auth_machine_intelligence }
		}
	}
	
	
	
	option = {
		name = fallen_technologies.6.bd
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_fanatical_roboteers }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			set_policy = {
				policy = artificial_intelligence_policy
				option = ai_full_rights
				cooldown = yes
			}
		}
	}
	option = {
		name = fallen_technologies.6.ed
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_inspiring_warlords }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			add_modifier = {
				modifier = inspiring_warlord
				days = -1
			}	
		}	
	}
	option = {
		name = fallen_technologies.6.f
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_pacifist_fervor }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			add_modifier = {
				modifier = demilitarized_state
				days = -1
			}
			set_policy = {
				policy = war_philosophy
				option = no_wars
				cooldown = yes
			}	
			set_policy = {
				policy = first_contact_protocol
				option = first_contact_attack_not_allowed
				cooldown = yes
			}	
		}
	}
	option = {
		name = fallen_technologies.6.g
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_authoritarian_fervor }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			add_modifier = {
				modifier = new_world_order
				days = -1
			}	
		}
	}
	option = {
		name = fallen_technologies.6.h
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_egalitarian_fervor }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			add_modifier = {
				modifier = democratized_utopia
				days = -1
			}
			set_policy = {
				policy = resettlement
				option = resettlement_not_allowed
				cooldown = yes
			}
			set_policy = {
				policy = appropriation
				option = appropriation_not_allowed
				cooldown = yes
			}
			set_policy = {
				policy = border_policy
				option = border_policy_open
				cooldown = yes
			}
			set_policy = {
				policy = refugees
				option = refugees_allowed
				cooldown = yes
			}
			set_policy = {
				policy = slavery
				option = slavery_not_allowed
				cooldown = yes
			}
			set_policy = {
				policy = purge
				option = purge_not_allowed
				cooldown = yes
			}
		}
	}
	
	option = {
		name = fallen_technologies.6.i
		trigger = {
			event_target:AscendedEmpireOverlord = { has_valid_civic = civic_barbaric_despoilers }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied
			add_modifier = {
				modifier = fe_satrapy
				days = -1
			}	
		}
	}
	
	option = {
		name = fallen_technologies.6.j
		trigger = {
			event_target:AscendedEmpireOverlord = { has_authority = auth_machine_intelligence }
		}
		event_target:NoobEmpire = {
			set_country_flag = subject_modifier_applied	
		}
		event_target:AscendedEmpireOverlord = {
			set_country_flag = overlord_modifier_applied
			add_modifier = {
				modifier = auxiliary_overlord
				days = -1
			}	
		}
	}
}

# Ascended Empire Subject Effects Removal
country_event = {
	id = fallen_technologies.7
	title = OK
	desc = OK
	hide_window = yes
	
	trigger = {	
		OR = {
			is_country_type = default
			is_country_type = ascended_empire
		}
		has_country_flag = subject_modifier_applied
		is_subject = no
	}		

	
	immediate = {
		remove_country_flag = subject_modifier_applied
		if = {
			limit = { has_modifier = inspiring_warlord }
			remove_modifier = "inspiring_warlord"
		}
		if = {
			limit = { has_modifier = demilitarized_state }
			remove_modifier = "demilitarized_state"
		}
		if = {
			limit = { has_modifier = new_world_order }
			remove_modifier = "new_world_order"
		}
		if = {
			limit = { has_modifier = democratized_utopia }
			remove_modifier = "democratized_utopia"
		}
		if = {
			limit = { has_modifier = fe_satrapy }
			remove_modifier = "fe_satrapy"
		}
	}
}

# Ascended Empire Overlord Effects Removal
country_event = {
	id = fallen_technologies.701
	title = OK
	desc = OK
	hide_window = yes
	
	trigger = {	
		is_country_type = ascended_empire
		has_country_flag = overlord_modifier_applied
		is_overlord = no
	}		

	
	immediate = {
		remove_country_flag = overlord_modifier_applied
		if = {
			limit = { has_modifier = auxiliary_overlord }
			remove_modifier = "auxiliary_overlord"
		}
	}
}
namespace = apsr

# Занятые номера:
# 1 - скрытый - запуск ивента 2
# 2 - стартовое сообщение на 40 день
# 3 - При экранировании планеты Колоссом - присвоение модификатора
# 4 - При уничтожении планеты Колоссом - присвоение модификатора
# 5, 6 - Появление одного Остекленного Мира
# 7 - Старт игры с истоком мода - генерация ресурсов на столице и смена типа планеты, генерация депозитов и т.д.
# 8 - Нахождение Остекленного мира
# 10 - Раздача технологий для ИИ при захвате
# 11 - Раздача технологий для ИИ при колонизации (как эвент-10, но другой "прицел")
# 12 - Раздача скидки для ИИ на постройку при старте игры
# 13, 14 - принудительный терраформинг ценных миров для ИИ
# 20 - фикс очистки зараженных миров (преторианцы)
# 30 - ежегодная проверка что мод используется со старта игры



country_event = {
	id = apsr.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		country_event = { id = apsr.2 days = 40 }
	}

}

### start message
country_event = {
	id = apsr.2
	title = "apsr.2.title"
	desc = {
		trigger = {
			NOT = {
				has_origin = apsr_origin_unique_capital
			}
		}
		text = "apsr.2.desc"
	}
	desc = {
		trigger = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
			has_origin = apsr_origin_unique_capital
		}
		text = "apsr.2.desc_with_civic_d"
	}
	desc = {
		trigger = {
			has_authority = auth_hive_mind
			has_origin = apsr_origin_unique_capital
		}
		text = "apsr.2.desc_with_civic_g"
	}
	desc = {
		trigger = {
			has_authority = auth_machine_intelligence
			has_origin = apsr_origin_unique_capital
		}
		text = "apsr.2.desc_with_civic_m"
	}
	picture = GFX_evt_apsr_startmessage  
	show_sound = event_construction  
	location = root
	is_triggered_only = yes

	trigger = {
		NOT = {
			AND = {
				has_global_flag = apsr_generation_0
				NOT = {
					has_global_flag = apsr_may_spawn
				}
			}
		}
	}
	
	immediate = {
		set_variable = {
			which = apsr_capital_battle_total_available_resources
			value = 0
		}
		set_variable = {
			which = apsr_capital_battle_safe_available_resources
			value = 0
		}
		set_variable = {
			which = apsr_capital_battle_empires_with_origins
			value = 0
		}
		set_variable = {
			which = apsr_capital_battle_empires_without_origins
			value = 0
		}
	}

	option = {
		name = apsr.2.button
		trigger = {
			NOT = {
				has_origin = apsr_origin_unique_capital
			} 
		}
	}
	option = {
		name = apsr.2.button_with_civic
		custom_tooltip = apsr.2.button_with_civic.tooltip
		trigger = {
			has_origin = apsr_origin_unique_capital
		}
		begin_event_chain = {
			event_chain = "apsr_beacons"
		}
		hidden_effect = {
			save_event_target_as = apsr_civic_resource_country
			every_planet = {
				limit = {
					has_modifier = "apsr1_planet_modifier"
				}
				save_event_target_as = apsr1_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr1_special_beacon
						name = "apsr1_special"
						desc = "apsr1_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr1_resource_planet
					}
					set_country_flag = apsr1_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr2_planet_modifier"
				}
				save_event_target_as = apsr2_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr2_special_beacon
						name = "apsr2_special"
						desc = "apsr2_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr2_resource_planet
					}
					set_country_flag = apsr2_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr3_planet_modifier"
				}
				save_event_target_as = apsr3_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr3_special_beacon
						name = "apsr3_special"
						desc = "apsr3_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr3_resource_planet
					}
					set_country_flag = apsr3_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr4_planet_modifier"
				}
				save_event_target_as = apsr4_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr4_special_beacon
						name = "apsr4_special"
						desc = "apsr4_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr4_resource_planet
					}
					set_country_flag = apsr4_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr5_planet_modifier"
				}
				save_event_target_as = apsr5_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr5_special_beacon
						name = "apsr5_special"
						desc = "apsr5_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr5_resource_planet
					}
					set_country_flag = apsr5_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr6_planet_modifier"
				}
				save_event_target_as = apsr6_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr6_special_beacon
						name = "apsr6_special"
						desc = "apsr6_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr6_resource_planet
					}
					set_country_flag = apsr6_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr7_planet_modifier"
				}
				save_event_target_as = apsr7_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr7_special_beacon
						name = "apsr7_special"
						desc = "apsr7_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr7_resource_planet
					}
					set_country_flag = apsr7_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr8_planet_modifier"
				}
				save_event_target_as = apsr8_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr8_special_beacon
						name = "apsr8_special"
						desc = "apsr8_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr8_resource_planet
					}
					set_country_flag = apsr8_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr9_planet_modifier"
				}
				save_event_target_as = apsr9_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr9_special_beacon
						name = "apsr9_special"
						desc = "apsr9_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr9_resource_planet
					}
					set_country_flag = apsr9_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr10_planet_modifier"
				}
				save_event_target_as = apsr10_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr10_special_beacon
						name = "apsr10_special"
						desc = "apsr10_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr10_resource_planet
					}
					set_country_flag = apsr10_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr11_planet_modifier"
				}
				save_event_target_as = apsr11_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr11_special_beacon
						name = "apsr11_special"
						desc = "apsr11_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr11_resource_planet
					}
					set_country_flag = apsr11_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr12_planet_modifier"
				}
				save_event_target_as = apsr12_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr12_special_beacon
						name = "apsr12_special"
						desc = "apsr12_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr12_resource_planet
					}
					set_country_flag = apsr12_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr13_planet_modifier"
				}
				save_event_target_as = apsr13_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr13_special_beacon
						name = "apsr13_special"
						desc = "apsr13_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr13_resource_planet
					}
					set_country_flag = apsr13_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr14_planet_modifier"
				}
				save_event_target_as = apsr14_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr14_special_beacon
						name = "apsr14_special"
						desc = "apsr14_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr14_resource_planet
					}
					set_country_flag = apsr14_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr15_planet_modifier"
				}
				save_event_target_as = apsr15_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr15_special_beacon
						name = "apsr15_special"
						desc = "apsr15_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr15_resource_planet
					}
					set_country_flag = apsr15_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr16_planet_modifier"
				}
				save_event_target_as = apsr16_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr16_special_beacon
						name = "apsr16_special"
						desc = "apsr16_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr16_resource_planet
					}
					set_country_flag = apsr16_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr17_planet_modifier"
				}
				save_event_target_as = apsr17_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr17_special_beacon
						name = "apsr17_special"
						desc = "apsr17_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr17_resource_planet
					}
					set_country_flag = apsr17_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr18_planet_modifier"
				}
				save_event_target_as = apsr18_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr18_special_beacon
						name = "apsr18_special"
						desc = "apsr18_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr18_resource_planet
					}
					set_country_flag = apsr18_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr19_planet_modifier"
				}
				save_event_target_as = apsr19_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr19_special_beacon
						name = "apsr19_special"
						desc = "apsr19_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr19_resource_planet
					}
					set_country_flag = apsr19_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr20_planet_modifier"
				}
				save_event_target_as = apsr20_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr20_special_beacon
						name = "apsr20_special"
						desc = "apsr20_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr20_resource_planet
					}
					set_country_flag = apsr20_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr21_planet_modifier"
				}
				save_event_target_as = apsr21_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr21_special_beacon
						name = "apsr21_special"
						desc = "apsr21_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr21_resource_planet
					}
					set_country_flag = apsr21_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr22_planet_modifier"
				}
				save_event_target_as = apsr22_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr22_special_beacon
						name = "apsr22_special"
						desc = "apsr22_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr22_resource_planet
					}
					set_country_flag = apsr22_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr23_planet_modifier"
				}
				save_event_target_as = apsr23_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr23_special_beacon
						name = "apsr23_special"
						desc = "apsr23_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr23_resource_planet
					}
					set_country_flag = apsr23_beacon_found
				}
			}
			every_planet = {
				limit = {
					has_modifier = "apsr24_planet_modifier"
				}
				save_event_target_as = apsr24_resource_planet
				event_target:apsr_civic_resource_country = {
					create_point_of_interest = {
						id = apsr24_special_beacon
						name = "apsr24_special"
						desc = "apsr24_special_desc"
						event_chain = "apsr_beacons"
						location = event_target:apsr24_resource_planet
					}
					set_country_flag = apsr24_beacon_found
				}
			}
		}
	}
}

# При экранировании планеты Колоссом
planet_event = {
	id = apsr.3
	hide_window = yes

	is_triggered_only = yes
		
	immediate = {
		if = {
			limit = {
				has_apsr_modifiers = yes
			}
			add_modifier = {
				modifier = "apsr_unshielded_candidate"
				days = -1
			}
		}
	}
}

# При уничтожении планеты Колоссом
planet_event = {
	id = apsr.4
	hide_window = yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_apsr_modifiers = yes
			}
			add_modifier = {
				modifier = "apsr_restoration_candidate"
				days = -1
			}
		}
	}
}

##  Старт игры с истоком мода - генерация ресурсов на столице и смена типа планеты, генерация депозитов и т.д.
country_event = {
	id = apsr.7
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_origin = apsr_origin_unique_capital
	}
	
	immediate = {
		random_owned_planet = {
			limit = {
				is_capital = yes
			}
			spawn_random_apsr_resource_with_origin = yes
		}
	}
}








##############################################################
#                                                            #
#      #   #####       #   #  ###  ###  #   # #     #####    #
#     # #    #         ## ## #   # #  # #   # #     #        #
#    #   #   #         # # # #   # #  # #   # #     ###      #
#    #####   #         #   # #   # #  # #   # #     #        #
#    #   # #####       #   #  ###  ###   ###  ##### #####    #
#                                                            #
##############################################################

# Эвенты для ИИ, которые не используют ресурсы (тип 1х)


# Раздача технологий при захвате
planet_event = {
	id = apsr.10
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			is_ai = yes
		}
	}
	
	immediate = {
		if = {
			limit = {
				has_modifier = apsr1_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr1_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr2_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr2_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr3_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr3_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr4_planet_modifier
			}
			from = {
				if = {
					limit = {
						NOT = {
							is_homicidal = yes
						}
					}
					give_technology = {
						tech = tech_apsr4_building_part1
						message = no
					}
				}
				if = {
					limit = {
						is_homicidal = yes
					}
					give_technology = {
						tech = tech_apsr4_building_part1_ext
						message = no
					}
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr5_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr5_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr6_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr6_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr7_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr7_building_cordon
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr8_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr8_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr9_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr9_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr10_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr10_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr11_planet_modifier
					from = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr11_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr11_planet_modifier
					from = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr11_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr12_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr12_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr13_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr13_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr14_planet_modifier
					from = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr14_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr14_planet_modifier
					from = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr14_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr15_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr15_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr16_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr16_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr17_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr17_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr18_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr18_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr19_planet_modifier
					from = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr19_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr19_planet_modifier
					from = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr19_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr20_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr20_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr21_planet_modifier
					from = {
						NOT = {
							is_gestalt = yes
						}
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr21_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr21_planet_modifier
					from = {
						is_gestalt = yes
					}
				}
			}
			from = {
				give_technology = {
					tech = tech_apsr21_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr22_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr22_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr23_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr23_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr24_planet_modifier
			}
			from = {
				give_technology = {
					tech = tech_apsr24_building_part1
					message = no
				}
				give_technology = {
					tech = tech_apsr24_building_talisman
					message = no
				}
			}
		}
	}
}

# Раздача технологий при колонизации (как эвент-10, но другой "прицел")
planet_event = {
	id = apsr.11
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_ai = yes
		}
	}
	
	immediate = {
		if = {
			limit = {
				has_modifier = apsr1_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr1_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr2_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr2_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr3_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr3_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr4_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr4_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr5_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr5_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr6_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr6_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr7_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr7_building_cordon
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr8_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr8_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr9_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr9_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr10_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr10_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr11_planet_modifier
					owner = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr11_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr11_planet_modifier
					owner = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr11_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr12_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr12_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr13_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr13_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr14_planet_modifier
					owner = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr14_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr14_planet_modifier
					owner = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr14_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr15_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr15_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr16_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr16_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr17_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr17_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr18_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr18_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr19_planet_modifier
					owner = {
						NOT = {
							has_authority = auth_machine_intelligence
						}
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr19_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr19_planet_modifier
					owner = {
						has_authority = auth_machine_intelligence
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr19_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr20_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr20_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr21_planet_modifier
					owner = {
						NOT = {
							is_gestalt = yes
						}
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr21_building_part_b1
					message = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					has_modifier = apsr21_planet_modifier
					owner = {
						is_gestalt = yes
					}
				}
			}
			owner = {
				give_technology = {
					tech = tech_apsr21_building_part_m1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr22_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr22_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr23_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr23_building_part1
					message = no
				}
			}
		}
		if = {
			limit = {
				has_modifier = apsr24_planet_modifier
			}
			owner = {
				give_technology = {
					tech = tech_apsr24_building_part1
					message = no
				}
				give_technology = {
					tech = tech_apsr24_building_talisman
					message = no
				}
			}
		}
	}
}

## Раздача скидки на постройку при старте игры
country_event = {
	id = apsr.12
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}
	
	immediate = {
		add_modifier = {
			modifier = "AI_discount_APSR"
			days = -1
		}
	}
}

## Принудительный терраформинг ценных миров - запуск
event = {
	id = apsr.13
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = { 
				AND = {
					is_country_type = default 
					is_ai = yes
				}
			}
			country_event = { id = apsr.14 }
		}
	}
}

## Принудительный терраформинг ценных миров
country_event = {
	id = apsr.14
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}
	
	immediate = {
		if = {
			limit = {
				AND = {
					has_technology = "tech_climate_restoration"
					any_planet_within_border = {
						AND = {
							has_planet_flag = apsr_planet
							OR = {
								has_modifier = "apsr_terraforming_candidate"
								has_modifier = "apsr_unshielded_candidate"
								has_modifier = "apsr_restoration_candidate"
							}
						}
					}
				}
			}
			every_planet_within_border = {
				limit = {
					AND = {
						has_planet_flag = apsr_planet
						OR = {
							has_modifier = "apsr_terraforming_candidate"
							has_modifier = "apsr_unshielded_candidate"
							has_modifier = "apsr_restoration_candidate"
						}
					}
				}
				if = {
					limit = {
						has_planet_flag = apsr_terraform_it_on_next_pulse
					}
					if = {
						limit = {
							has_unique_apsr_modifiers = yes
						}
						change_pc = pc_apsr_unique
						remove_modifier = apsr_terraforming_candidate 
						remove_modifier = apsr_unshielded_candidate 
						remove_modifier = apsr_restoration_candidate 
						reset_planet = yes
						clear_deposits = yes
						prevent_anomaly = yes
						apsr_generate_unique_deposits = yes
						set_planet_flag = colony_event
						apsr_set_planet_picture_by_resource = yes
					}
					if = {
						limit = {
							has_ancient_not_complex_apsr_modifiers = yes
						}
						change_pc = pc_apsr_ancient
						remove_modifier = apsr_terraforming_candidate 
						remove_modifier = apsr_unshielded_candidate 
						remove_modifier = apsr_restoration_candidate 
						reset_planet = yes
						clear_deposits = yes
						prevent_anomaly = yes
						apsr_generate_ancient_not_complex_deposits = yes
						set_planet_flag = colony_event
						apsr_set_planet_picture_by_resource = yes
					}
					if = {
						limit = {
							has_ancient_complex_apsr_modifiers = yes
						}
						change_pc = pc_apsr_ancient
						remove_modifier = apsr_terraforming_candidate 
						remove_modifier = apsr_unshielded_candidate 
						remove_modifier = apsr_restoration_candidate 
						reset_planet = yes
						clear_deposits = yes
						prevent_anomaly = yes
						apsr_generate_ancient_complex_deposits = yes
						set_planet_flag = colony_event
						apsr_set_planet_picture_by_resource = yes
					}
					
				}
				else = {
					set_planet_flag = apsr_terraform_it_on_next_pulse
				}
			}
		}
	}
}

# фикс очистки зараженных миров (преторианцы)
planet_event = {
	id = apsr.20
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		planet_devastation >= 100
		is_planet_class = pc_infested
		has_apsr_modifiers = yes
		has_planet_flag = "apsr_planet"
	}
	
	immediate = {
		set_planet_flag = previously_infested
		destroy_colony = yes
		random_list = {
			50 = { change_pc = pc_barren }
			50 = { change_pc = pc_barren_cold }
		}
		reset_planet = yes
		add_modifier = {
			modifier = "apsr_uninfected_candidate"
			days = -1
		}
		planet_event = { id = crisis.216 }
	}
}

# Спавн Остекленного мира
event = {
	id = apsr.5
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_country = {
			limit = {
				has_country_flag = apsr_server_country
			}
			country_event = { id = apsr.6 days = 6 }
		}
	}
}
event = {
	id = apsr.6
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		while = {
			count = 3
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 3
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 7
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 10
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 15
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 20
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 25
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 30
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 40
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
		if = {
			limit = {
				num_empires > 50
			}
			random_planet = {
				limit = {
					AND = {
						NOT = { has_planet_flag = "apsr_planet" }
						NOT = { has_planet_flag = hatchling_egg }
						NOT = { has_planet_flag = gpm_is_precursor_world }
						NOT = { has_planet_flag = gpm_is_wondrous_planet }
						NOT = { has_planet_flag = gpm_ego_gaia_planet }
						is_colony = no
						is_capital = no
						planet_size > 12
						planet_size < 25
						OR = {
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}
						solar_system = {
							NOT = {
								any_system_megastructure = { is_megastructure_type = dyson_sphere_ruined }
							}
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										is_planet_class = pc_apsr_glass
									}
								}
							}
						} 
					}
				}
				change_pc = pc_apsr_glass
				set_planet_entity = { 
					entity = "apsr_aura_planet_glass" 
				}
			}
		}
	}
}

# Изучение Остекленного мира
ship_event = {
	id = apsr.8
	title = "apsr.8.name"
	desc = "apsr.8.desc"
	picture = GFX_apsr_glass_planet
	location = from
	show_sound = event_mystic_reveal_light
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			is_ai = no
			NOT = {
				has_country_flag = pc_apsr_glass_found
			}
		}
		FROM = {
			has_owner = no
			is_planet_class = pc_apsr_glass
		}
	}
	
	immediate = {
		owner = { set_country_flag = pc_apsr_glass_found }
	}

	option = {
		name = "apsr.8.ok"
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = 1000
				min = 1000
				max = 1000
			}
		}
	}
}



# ежегодная проверка что мод используется со старта игры
event = {
	id = apsr.30
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_global_flag = apsr_mod_on
				}
			}
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = apsr.31 days = 2 }
			}
			set_global_flag = apsr_mod_on
		}
	}
}

### предупреждение если мод включен после старта игры
country_event = {
	id = apsr.31
	title = "apsr.31.title"
	desc = "apsr.31.desc"
	picture = GFX_evt_apsr_startmessage  
	show_sound = event_construction
	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = apsr.31.button.yes
		hidden_effect = {
		
			# 01
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr1_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr1_deposit 
				save_global_event_target_as = apsr1_planet_target
				set_global_flag = apsr1_spawned	
			}
		
			# 02
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr2_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr2_deposit 
				save_global_event_target_as = apsr2_planet_target
				set_global_flag = apsr2_spawned	
			}
		
			# 03
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr3_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr3_deposit 
				save_global_event_target_as = apsr3_planet_target
				set_global_flag = apsr3_spawned	
			}
		
			# 04
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr4_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr4_deposit 
				save_global_event_target_as = apsr4_planet_target
				set_global_flag = apsr4_spawned	
			}
		
			# 05
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr5_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr5_deposit 
				save_global_event_target_as = apsr5_planet_target
				set_global_flag = apsr5_spawned	
			}
		
			# 06
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr6_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr6_deposit 
				save_global_event_target_as = apsr6_planet_target
				set_global_flag = apsr6_spawned	
			}
		
			# 07
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr7_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr7_deposit 
				save_global_event_target_as = apsr7_planet_target
				set_global_flag = apsr7_spawned	
			}
		
			# 08
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr8_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr8_deposit 
				save_global_event_target_as = apsr8_planet_target
				set_global_flag = apsr8_spawned	
			}
		
			# 09
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr9_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr9_deposit 
				save_global_event_target_as = apsr9_planet_target
				set_global_flag = apsr9_spawned	
			}
		
			# 10
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr10_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr10_deposit 
				save_global_event_target_as = apsr10_planet_target
				set_global_flag = apsr10_spawned	
			}
		
			# 11
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr11_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr11_deposit 
				save_global_event_target_as = apsr11_planet_target
				set_global_flag = apsr11_spawned	
			}
		
			# 12
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr12_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr12_deposit 
				save_global_event_target_as = apsr12_planet_target
				set_global_flag = apsr12_spawned	
			}
		
			# 13
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr13_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr13_deposit 
				save_global_event_target_as = apsr13_planet_target
				set_global_flag = apsr13_spawned	
			}
		
			# 14
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr14_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr14_deposit 
				save_global_event_target_as = apsr14_planet_target
				set_global_flag = apsr14_spawned	
			}
		
			# 15
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr15_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr15_deposit 
				save_global_event_target_as = apsr15_planet_target
				set_global_flag = apsr15_spawned	
			}
		
			# 16
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr16_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr16_deposit 
				save_global_event_target_as = apsr16_planet_target
				set_global_flag = apsr16_spawned	
			}
		
			# 17
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr17_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr17_deposit 
				save_global_event_target_as = apsr17_planet_target
				set_global_flag = apsr17_spawned	
			}
		
			# 18
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr18_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr18_deposit 
				save_global_event_target_as = apsr18_planet_target
				set_global_flag = apsr18_spawned	
			}
		
			# 19
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr19_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr19_deposit 
				save_global_event_target_as = apsr19_planet_target
				set_global_flag = apsr19_spawned	
			}
		
			# 20
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr20_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr20_deposit 
				save_global_event_target_as = apsr20_planet_target
				set_global_flag = apsr20_spawned	
			}
		
			# 21
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr21_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr21_deposit 
				save_global_event_target_as = apsr21_planet_target
				set_global_flag = apsr21_spawned	
			}
		
			# 22
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr22_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr22_deposit 
				save_global_event_target_as = apsr22_planet_target
				set_global_flag = apsr22_spawned	
			}
		
			# 23
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr23_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr23_deposit 
				save_global_event_target_as = apsr23_planet_target
				set_global_flag = apsr23_spawned	
			}
		
			# 24
		
			random_planet = {
				limit = {
					AND = {
						NOT = { has_modifier = terraforming_candidate }
						planet_size > 16
						planet_size < 25
						OR = {
							is_planet_class = pc_frozen
							is_planet_class = pc_toxic
							is_planet_class = pc_barren_cold
							is_planet_class = pc_barren
							is_planet_class = pc_molten
						}	
						solar_system = {
							NOR = {
								is_star_class = sc_black_hole
								is_star_class = sc_neutron_star
								is_star_class = sc_pulsar
							}
							NOT = {
								any_system_planet = {
									OR = {
										is_colony = yes
										is_capital = yes
										has_planet_flag = apsr_planet
									}
								}
							}
						} 
					}
				}
				add_modifier = {
					modifier = "apsr_terraforming_candidate"
					days = -1
				}
				add_modifier = { 
					modifier = apsr24_planet_modifier
					days = -1 
				}
				set_planet_flag = "apsr_planet"	
				add_deposit = apsr24_deposit 
				save_global_event_target_as = apsr24_planet_target
				set_global_flag = apsr24_spawned	
			}
			
		}
	}

	option = {
		name = apsr.31.button.no
	}
}
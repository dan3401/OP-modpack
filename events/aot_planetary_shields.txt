namespace = aot_planetary_shields_event
#---------------------------------------
# This handles the creation of shield
# ambient objects on planets.
#---------------------------------------
# Dark Matter shield generator completed.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.1
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
		is_ringworld = no
		is_memeable_space_habitat = no
		has_building = building_dark_energy_psg
	}
	immediate = {
		planet_event = {
			id = aot_planetary_shields_event.3
		}
	}
}

# Dark Energy shield generator completed.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
		is_ringworld = no
		is_memeable_space_habitat = no
		has_building = building_ae_dark_energy_psg
	}
	immediate = {
		planet_event = {
			id = aot_planetary_shields_event.4
		}
	}
}

# Creation of dark energy shields for planets.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.3
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
	}
	immediate = {
		remove_planet_flag = has_dm_planetary_shield_01
		solar_system = {
			every_system_ambient_object = {
				limit = {
					has_ambient_object_flag = dm_planetary_shield_01
				}
				destroy_ambient_object = this
			}
			every_system_planet = {
				limit = {
					is_ringworld = no
					is_memeable_space_habitat = no
					has_building = building_dark_energy_psg
				}
				solar_system = {
					random_system_planet = {
						limit = {
							is_moon = no
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 1
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_1
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 2
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_2
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 3
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_3
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 4
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_4
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 5
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_5
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 6
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_6
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 7
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_7
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 8
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 9
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 10
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_18
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_19
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_20
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_21
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_22
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_23
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_24
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_25
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 26
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_26
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 27
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_27
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 28
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_28
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 29
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_29
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 30
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_30
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 31
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_31
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 32
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_32
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 33
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_33
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 34
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_34
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 35
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_35
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 36
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_36
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 37
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_37
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 38
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_38
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 39
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_39
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 40
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_40
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 41
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_41
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 42
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_42
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 43
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_43
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 44
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_44
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 45
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_45
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 46
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_46
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 47
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_47
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 48
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_48
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 49
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_49
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 50
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_50
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size < 11
								}
							}
							create_ambient_object = {
								type = dm_planetary_shield_ps_7
								location = this
							}
						}
					}
					last_created_ambient_object = {
						set_location = prevprev
						set_ambient_object_flag = dm_planetary_shield_01
					}
				}
				set_planet_flag = has_dm_planetary_shield_01
			}
		}
	}
}

# Creation of dark energy shields for planets.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
	}
	immediate = {
		remove_planet_flag = has_ae_planetary_shield_01
		solar_system = {
			every_system_ambient_object = {
				limit = {
					has_ambient_object_flag = ae_planetary_shield_01
				}
				destroy_ambient_object = this
			}
			every_system_planet = {
				limit = {
					is_ringworld = no
					is_memeable_space_habitat = no
					has_building = building_ae_dark_energy_psg
				}
				solar_system = {
					random_system_planet = {
						limit = {
							is_moon = no
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 1
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_1
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 2
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_2
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 3
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_3
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 4
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_4
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 5
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_5
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 6
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_6
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 7
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_7
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 8
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 9
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 10
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_18
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_19
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_20
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_21
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_22
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_23
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_24
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_25
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 26
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_26
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 27
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_27
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 28
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_28
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 29
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_29
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 30
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_30
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 31
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_31
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 32
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_32
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 33
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_33
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 34
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_34
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 35
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_35
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 36
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_36
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 37
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_37
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 38
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_38
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 39
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_39
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 40
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_40
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 41
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_41
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 42
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_42
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 43
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_43
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 44
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_44
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 45
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_45
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 46
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_46
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 47
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_47
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 48
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_48
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 49
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_49
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 50
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_50
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size < 11
								}
							}
							create_ambient_object = {
								type = ae_planetary_shield_ps_7
								location = this
							}
						}
					}
					last_created_ambient_object = {
						set_location = prevprev
						set_ambient_object_flag = ae_planetary_shield_01
					}
				}
				set_planet_flag = has_ae_planetary_shield_01
			}
		}
	}
}

# Cleanup leftover shields at the end of the month
# This = Planet
country_event = {
	id = aot_planetary_shields_event.5
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
	}
	immediate = {
		every_planet = {
			limit = {
				has_owner = yes
				OR = {
					NOR = {
						has_building = building_dark_energy_psg
						has_building = building_ae_dark_energy_psg
						has_building = building_stellarite_psg
					}
					AND = {
						has_building = building_dark_energy_psg
						NOT = {
							has_planet_flag = has_dm_planetary_shield_01
						}
					}
					AND = {
						has_building = building_ae_dark_energy_psg
						NOT = {
							has_planet_flag = has_ae_planetary_shield_01
						}
					}
					AND = {
						has_building = building_stellarite_psg
						NOT = {
							has_planet_flag = has_stellarite_planetary_shield_01
						}
					}
				}
			}
			planet_event = {
				id = aot_planetary_shields_event.3
			}
			planet_event = {
				id = aot_planetary_shields_event.4
			}
			planet_event = {
				id = aot_planetary_shields_event.7
			}
		}
	}
}

# Delete all planetary shields via ACOT edict decision.
# This = Planet
country_event = {
	id = aot_planetary_shields_event.6
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_planet = {
			remove_planet_flag = has_ae_planetary_shield_01
			remove_planet_flag = has_dm_planetary_shield_01
			remove_planet_flag = has_stellarite_planetary_shield_01
			solar_system = {
				every_system_ambient_object = {
					limit = {
						OR = {
							has_ambient_object_flag = stellarite_planetary_shield_01
							has_ambient_object_flag = ae_planetary_shield_01
							has_ambient_object_flag = dm_planetary_shield_01
						}
					}
					destroy_ambient_object = this
				}
			}
		}
	}
}

# Creation of stellarite shields for planets.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.7
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
	}
	immediate = {
		remove_planet_flag = has_stellarite_planetary_shield_01
		solar_system = {
			every_system_ambient_object = {
				limit = {
					has_ambient_object_flag = stellarite_planetary_shield_01
				}
				destroy_ambient_object = this
			}
			every_system_planet = {
				limit = {
					is_ringworld = no
					is_memeable_space_habitat = no
					has_building = building_stellarite_psg
				}
				solar_system = {
					random_system_planet = {
						limit = {
							is_moon = no
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 1
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_1
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 2
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_2
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 3
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_3
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 4
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_4
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 5
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_5
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 6
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_6
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 7
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_7
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 8
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 9
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 10
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_18
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_19
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_20
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_21
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_22
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_23
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_24
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_25
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 26
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_26
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 27
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_27
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 28
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_28
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 29
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_29
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 30
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_30
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 31
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_31
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 32
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_32
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 33
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_33
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 34
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_34
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 35
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_35
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 36
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_36
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 37
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_37
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 38
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_38
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 39
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_39
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 40
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_40
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 41
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_41
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 42
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_42
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 43
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_43
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 44
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_44
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 45
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_45
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 46
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_46
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 47
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_47
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 48
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_48
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 49
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_49
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = no
									planet_size = 50
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_50
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 25
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 24
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_17
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 23
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 22
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_16
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 21
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_15
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 20
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_14
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 19
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_13
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 18
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 17
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_12
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 16
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_11
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 15
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_10
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 14
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 13
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_9
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 12
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size = 11
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_8
								location = this
							}
						}
						IF = {
							limit = {
								prevprev = {
									is_moon = yes
									planet_size < 11
								}
							}
							create_ambient_object = {
								type = stellarite_planetary_shield_ps_7
								location = this
							}
						}
					}
					last_created_ambient_object = {
						set_location = prevprev
						set_ambient_object_flag = stellarite_planetary_shield_01
					}
				}
				set_planet_flag = has_stellarite_planetary_shield_01
			}
		}
	}
}

# Stellarite shield generator completed.
# This = Planet
planet_event = {
	id = aot_planetary_shields_event.8
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = dm_planetary_shields_OFF
		}
		is_ringworld = no
		is_memeable_space_habitat = no
		has_building = building_stellarite_psg
	}
	immediate = {
		planet_event = {
			id = aot_planetary_shields_event.7
		}
	}
}

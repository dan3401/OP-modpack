##########################################################################
# Decisions
##########################################################################
decision_planet_fe_buildings_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_resources

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
		cost = {
			influence = 100
		}
	}

	potential = {
		owner = {
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
	}
	
	prerequisites = {
		"tech_fe_class_4_singularity"
	}

	allow = {
		NOT = { has_modifier = pm_planet_fe_buildings_boost }
	}

	effect = {
		add_modifier = { modifier = "pm_planet_fe_buildings_boost" days = 3600 }
		custom_tooltip = planet_fe_buildings_boost
	}

	ai_weight = {
		weight = 5
	}
}

# Arcology Project for Ascended Empires
decision_ae_arcology_project = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	prerequisites = {
		"tech_arcology_project"
	}

	potential = {
		NOR = {
			is_planet_class = pc_city
			is_planet_class = pc_relic
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_Utopian_Paradise
		}
		habitable_structure = no
		exists = owner
		owner = { 
			is_country_type = ascended_empire
			NOT = { has_ascension_perk = ap_arcology_project }
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_arcology_project_requirements
			free_district_slots < 1
			num_districts = { type = district_farming value < 1 }
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {
			clear_deposits = yes
			change_pc = pc_city
			set_planet_entity = {
				entity = "city_planet_entity"
				graphical_culture = owner
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = mega.200 }
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Create FE Preserve
decision_make_xeno_preserve = {
	owned_planets_only = yes
	icon = decision_slave_colony
	
	prerequisites = {
		"tech_fe_xeno_preserve"
	}

	resources = {
		category = decisions
		cost = {
			influence = 100
		}
	}
	
	potential = {
		is_capital = no
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { has_modifier = resort_colony }
		is_planet_class = pc_gaia
		owner = { 
			is_regular_empire = yes 
			is_xenophile = yes
		}
		has_upgraded_capital = no
		NOT = { 
			owner = { 
				any_owned_planet = { has_modifier = fe_xeno_preserve }
			}
		}
	}
	
	allow = {
		planet_size >= 20
		custom_tooltip = {
			fail_text = decision_fe_xeno_preserve_no_districts
			num_districts = { type = any value < 1 }
			num_buildings = { type = any value < 2 }
		}
	}
	
	effect = {
		set_planet_name = "The Preserve"
		add_modifier = {
			modifier = fe_xeno_preserve
			days = -1
		}	
		hidden_effect = {
			remove_building = building_colony_shelter
			add_building = building_fe_xeno_preserve
		}
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_abolish_xeno_preserve = {
	owned_planets_only = yes
	icon = decision_slave_colony

	resources = {
		category = decisions
		cost = {
			influence = 250
		}
	}
	
	potential = {
		has_modifier = fe_xeno_preserve
	}
	
	effect = {
		remove_modifier = fe_xeno_preserve	
		hidden_effect = { validate_planet_buildings_and_districts = yes }
	}
	
	ai_weight = {
		weight = 0
	}
}
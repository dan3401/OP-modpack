##########################################################################
# Decisions
##########################################################################
decision_planet_food_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = no }
			}
			food = 100
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_lithoid_empire = yes }
			}
			minerals = 300
		}
	}
	
	potential = {
		always = no
		owner = {
			is_regular_empire = yes
		}
		NOR = {
			has_modifier = planet_growth_discouraged
			has_modifier = planet_population_control
		}
		NOT = { has_modifier = planet_food_boost }
	}
	
	effect = {
		add_modifier = { modifier = "planet_food_boost" days = -1 }
	}
	
	ai_weight = {
		weight = 5

		# don't encourage growth if there is no free housing
		modifier = {
			factor = 0
			free_housing < 1
		}
		modifier = {
			factor = 0
			exists = owner
			owner = {
				has_monthly_income = { resource = food value < 10 }
				is_lithoid_empire = no
			}
		}
		modifier = {
			factor = 0
			exists = owner
			owner = {
				has_monthly_income = { resource = minerals value < 10 }
				is_lithoid_empire = yes
			}
		}
		modifier = {
			factor = 0
			exists = owner
			owner = {
				is_robot_empire = yes
			}
		}
		modifier = {
			factor = 0
			has_planet_flag = ended_food
		}
	}
}

decision_planet_luxuries_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_luxuries

	resources = {
		category = decisions
		cost = {
			consumer_goods = 100
		}	
	}
	
	potential = {
		owner = {
			is_regular_empire = yes
			OR = {
				NOT = { has_valid_civic = civic_agrarian_idyll }
				is_lithoid_empire = yes
			}
		}
		NOT = { has_modifier = planet_luxuries_boost }
	}
	
	effect = {
		add_modifier = { modifier = "planet_luxuries_boost" days = -1 }
	}
	
	ai_weight = {
		weight = 1
		# don't distribute luxuries if there is a lot of amenities already
		modifier = {
			factor = 0
			free_amenities > 30
		}
		modifier = {
			factor = 0
			exists = owner
			owner = { has_monthly_income = { resource = consumer_goods value < 10 } }
		}
		modifier = {
			factor = 0
			has_planet_flag = ended_luxury
		}
	}
}

decision_planet_agrarian_luxuries_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_luxuries

	resources = {
		category = decisions
		cost = {
			food = 50
			consumer_goods = 50
		}
	}
	
	potential = {
		owner = {
			is_regular_empire = yes
			has_valid_civic = civic_agrarian_idyll
			is_lithoid_empire = no
		}
		NOT = { has_modifier = planet_agrarian_luxuries_boost }
	}
	
	effect = {
		add_modifier = { modifier = "planet_agrarian_luxuries_boost" days = -1 }
	}
	
	ai_weight = {
		weight = 1
		# don't distribute luxuries if there is a lot of amenities already
		modifier = {
			factor = 0
			free_amenities > 40
		}
		modifier = {
			factor = 0
			exists = owner
			owner = {
				OR = {
					has_monthly_income = { resource = food value < 5 }
					has_monthly_income = { resource = consumer_goods value < 5 }
				}
			}
		}
		modifier = {
			factor = 0
			has_planet_flag = ended_luxury
		}
	}
}

decision_end_planet_food_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			energy = 10
		}
	}
	
	potential = {
		has_modifier = planet_food_boost
	}	
	
	effect = {
		remove_modifier = planet_food_boost
		hidden_effect = {
			set_timed_planet_flag = { flag = ended_food days = 1800 }
		}
	}
	
	ai_weight = {
		weight = 0
		modifier = {
			weight = 5
			AND = {
				free_housing < 1
				num_free_districts = {
					type = any
					value < 1
				}
				has_building_construction = no #Added since they're probably building housing
			}
		}
		modifier = {
			weight = 10
			exists = owner
			owner = {
				has_monthly_income = { resource = food value < 2 }
				is_lithoid_empire = no
			}
		}
		modifier = {
			weight = 10
			exists = owner
			owner = {
				has_monthly_income = { resource = minerals value < 2 }
				is_lithoid_empire = yes
			}
		}
		modifier = {
			weight = 10
			OR = {
				free_jobs < 5
				free_housing < 5
				free_amenities < 5
			}
			exists = owner
			owner = {
				has_monthly_income = { resource = food value < 10 }
				is_lithoid_empire = no
				any_owned_planet = {
					is_under_colonization = no
					NOT = { has_modifier = planet_food_boost }
					OR = {
						num_pops < 10
						free_jobs > 5
					}
				}
			}
		}
		modifier = {
			weight = 10
			OR = {
				free_jobs < 5
				free_housing < 5
				free_amenities < 5
			}
			exists = owner
			owner = {
				has_monthly_income = { resource = minerals value < 10 }
				is_lithoid_empire = yes
				any_owned_planet = {
					is_under_colonization = no
					NOT = { has_modifier = planet_food_boost }
					OR = {
						num_pops < 10
						free_jobs > 5
					}
				}
			}
		}
		modifier = {
			weight = 100
			exists = owner
			owner = { is_robot_empire = yes }
		}
	}
}

decision_end_planet_luxuries_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_luxuries

	resources = {
		category = decisions
		cost = {
			energy = 10
		}	
	}
	
	potential = {
		has_modifier = planet_luxuries_boost
	}	
	
	effect = {
		remove_modifier = planet_luxuries_boost
		hidden_effect = {
			set_timed_planet_flag = { flag = ended_luxury days = 1800 }
		}
	}
	
	ai_weight = {
		weight = 0
		# don't distribute luxuries if there is a lot of amenities already
		modifier = {
			weight = 1
			free_amenities > 40
		}
		modifier = {
			weight = 10
			exists = owner
			owner = { has_monthly_income = { resource = consumer_goods value < 2 } }
		}
		modifier = {
			factor = 100
			exists = owner
			owner = {
				OR = {
					AND = {
						has_valid_civic = civic_agrarian_idyll
						is_lithoid_empire = no
					}
					is_regular_empire = no
				}
			}
		}
	}
}

decision_end_planet_agrarian_luxuries_boost = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_luxuries

	resources = {
		category = decisions
		cost = {
			energy = 10
		}
	}
	
	potential = {
		has_modifier = planet_agrarian_luxuries_boost
	}	
	
	effect = {
		remove_modifier = planet_agrarian_luxuries_boost
		hidden_effect = {
			set_timed_planet_flag = { flag = ended_luxury days = 1800 }
		}
	}
	
	ai_weight = {
		weight = 0
		# don't distribute luxuries if there is a lot of amenities already
		modifier = {
			weight = 1
			free_amenities > 50
		}
		modifier = {
			weight = 10
			exists = owner
			owner = { has_monthly_income = { resource = consumer_goods value < 1 } }
		}
		modifier = {
			weight = 10
			exists = owner
			owner = { has_monthly_income = { resource = food value < 1 } }
		}
		modifier = {
			factor = 100
			exists = owner
			owner = {
				OR = {
					NOT = { has_valid_civic = civic_agrarian_idyll }
					is_lithoid_empire = yes
					is_regular_empire = no
				}
			}
		}
	}
}